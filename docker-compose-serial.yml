---
# This compose file is used for serial communications to USB-connected devices
# It is meant to be used in tandem with the Base Compose template
version: "3.3"
services:
   serialwriter:
    depends_on:
      - mariadb
    restart: "always"
    image: dms-lite-serialwriter:${DMSLITEVERSION}
    build:
      dockerfile: Dockerfile
      context: ./serial-sql-writer
    volumes:
      - "/dev/cu.usbserial-0001:/dev/ttyUSB0"
    privileged: true
    links:
      - mariadb
    environment:
      MYSQL_DATABASE: "${MYSQL_DATABASE}"
      MYSQL_USER: "${MYSQL_USER}"
      MYSQL_PASSWORD: "${MYSQL_PASSWORD}"
